# STL-–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –≤ –¥–∞—Ç–∞-–∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–µ



–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –∏ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —Å–º–µ—â–µ–Ω–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–∞—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º STL-–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (Seasonal-Trend decomposition using LOESS). –ú–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –¥–∞—Ç–∞-–∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–µ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–µ–∑–æ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å —Ä–æ–∂–¥–∞–µ–º–æ—Å—Ç–∏.



–°—Ç–∞—Ç—å—è: –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –∏ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —Å–º–µ—â–µ–Ω–∏–π –≤ –¥–∞–Ω–Ω—ã—Ö: STL-–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—Å–∫–∏—Ö –¥–∞—Ç–∞-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

[–ò—Å—Ö–æ–¥–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ](https://t-j.ru/birthday-stat/)

[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è statsmodels.tsa.seasonal.STL](https://www.statsmodels.org/dev/generated/statsmodels.tsa.seasonal.STL.html)



## üìå –¶–µ–ª—å



–ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ STL-–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤,

- —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è,

- –≤—ã—è–≤–∏—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–µ —Å–µ–∑–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã,

- –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤ –≤ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç—Å–∫–∏—Ö —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö.



---



## üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö



–î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥, –≥–¥–µ –¥–ª—è –∫–∞–∂–¥–æ–π –¥–∞—Ç—ã —É–∫–∞–∑–∞–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –ª—é–¥–µ–π.  

–§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ DataFrame:



| dt (pd.Timestamp) | cnt_people (int) |
|-------------------|------------------|
| 1980-01-01        | 123              |
| 1980-01-02        | 117              |
| ...               | ...              |


> ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¥–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ pd.Timestamp, –∞ –¥–∞–Ω–Ω—ã–µ ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–Ω—è–º.---



## ‚ñ∂Ô∏è –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è



```python

import pandas as pd

from stl_correction import stl_correction



# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

df = pd.read_csv('data/birth_data.csv')

df['dt'] = pd.to_datetime(df['dt'])



# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

corrected_df = stl_correction(df)

```





## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DataFrame —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–µ–π —Ä–æ–∂–¥–µ–Ω–∏–π –ø–æ –¥–Ω—è–º –≥–æ–¥–∞, —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ —Ç—Ä–µ–Ω–¥ –∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å:

| birth_day | frac_people |
|-----------|-------------|
| 01-01     | 0.0027      |
| 01-02     | 0.0026      |
| ...       | ...         |



